# Component 2: FastAPI Framework
## Orchestrator Web Application Framework - Ansible Deployment Plan

**Component:** FastAPI Framework  
**Target Server:** hx-orchestrator-server (192.168.10.8)  
**Timeline:** Week 1, Days 3-4 (4-6 hours)  
**Priority:** ⭐ **CRITICAL - FOUNDATION**  
**Dependencies:** Component 1 (Base System Setup)

---

## Overview

This plan covers the FastAPI application framework deployment, including:

- FastAPI and Uvicorn installation
- Base application structure
- Configuration management (Pydantic Settings)
- Environment variables deployment
- Systemd service configuration
- Health check endpoints
- Logging configuration

---

## Ansible Role Structure

```
roles/orchestrator_fastapi/
├── defaults/
│   └── main.yml
├── tasks/
│   ├── main.yml
│   ├── 01-dependencies.yml
│   ├── 02-application-structure.yml
│   ├── 03-configuration.yml
│   ├── 04-service.yml
│   └── 05-health-checks.yml
├── templates/
│   ├── main.py.j2
│   ├── config/settings.py.j2
│   ├── config/.env.j2
│   ├── api/health.py.j2
│   ├── utils/logging_config.py.j2
│   ├── logging.yaml.j2
│   └── shield-orchestrator.service.j2
├── handlers/
│   └── main.yml
└── files/
    └── requirements-fastapi.txt
```

---

## defaults/main.yml

```yaml
---
# FastAPI Configuration
fastapi_version: ">=0.115.0"
uvicorn_version: ">=0.30.0"
pydantic_version: ">=2.0.0"

# Server configuration
orchestrator_host: "0.0.0.0"
orchestrator_port: 8000
orchestrator_workers: 4
orchestrator_reload: false  # Set to true for dev

# Logging
log_level: "INFO"
log_format: "json"
log_config_file: "/opt/hx-citadel-shield/orchestrator/config/logging.yaml"

# API configuration
api_title: "Shield Orchestrator API"
api_version: "1.0.0"
api_description: "HX-Citadel Shield Intelligence Hub"
api_docs_url: "/docs"
api_redoc_url: "/redoc"
api_openapi_url: "/openapi.json"

# CORS configuration
cors_enabled: true
cors_origins:
  - "http://192.168.10.11"       # Open WebUI
  - "http://192.168.10.12:3000"  # shield-power-ui
  - "http://192.168.10.12:3001"  # shield-ag-ui
  - "http://192.168.10.12:3002"  # shield-dashboard

# Health check
health_check_path: "/health"
health_detailed_path: "/health/detailed"
health_readiness_path: "/health/readiness"
health_liveness_path: "/health/liveness"
```

---

## files/requirements-fastapi.txt

```
# FastAPI Framework Dependencies
# Component 2: FastAPI Framework

# Web framework
fastapi>=0.115.0
uvicorn[standard]>=0.30.0
pydantic[email]>=2.0.0
pydantic-settings>=2.0.0

# ASGI server enhancements
uvloop>=0.20.0         # High-performance event loop
httptools>=0.6.0       # Fast HTTP parsing

# Request/response handling
python-multipart>=0.0.6   # File uploads
python-jose[cryptography]  # JWT tokens
passlib[bcrypt]>=1.7.4    # Password hashing

# WebSocket and SSE
websockets>=15.0.1
sse-starlette>=2.0.0

# Middleware
slowapi>=0.1.9         # Rate limiting
python-json-logger     # JSON logging

# Utilities
pyyaml>=6.0
python-dateutil
pytz
```

---

## templates/main.py.j2

```python
#!/usr/bin/env python3
"""
Shield Orchestrator - Main Application
Generated by Ansible for {{ ansible_hostname }}
"""

from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from fastapi.middleware.trustedhost import TrustedHostMiddleware
from contextlib import asynccontextmanager
import logging

from config.settings import settings
from api import health
from utils.logging_config import setup_logging

# Setup logging
setup_logging()
logger = logging.getLogger("shield-orchestrator")

@asynccontextmanager
async def lifespan(app: FastAPI):
    """
    Application lifespan manager.
    
    Startup:
      - Initialize database connections
      - Start worker pool
      - Initialize LightRAG engine
      - Setup Redis Streams
    
    Shutdown:
      - Graceful worker shutdown
      - Close database connections
      - Cleanup resources
    """
    logger.info("🚀 Shield Orchestrator starting...")
    
    # TODO: Initialize components (in subsequent deployments)
    # await init_database()
    # await init_redis_streams()
    # await init_lightrag()
    # await start_worker_pool()
    
    logger.info("✅ Shield Orchestrator ready!")
    
    yield  # Application runs
    
    logger.info("🛑 Shield Orchestrator shutting down...")
    
    # TODO: Cleanup (in subsequent deployments)
    # await stop_worker_pool()
    # await close_database()
    # await close_redis()
    
    logger.info("✅ Shutdown complete")

# Create FastAPI application
app = FastAPI(
    title="{{ api_title }}",
    version="{{ api_version }}",
    description="{{ api_description }}",
    docs_url="{{ api_docs_url }}",
    redoc_url="{{ api_redoc_url }}",
    openapi_url="{{ api_openapi_url }}",
    lifespan=lifespan
)

# Add CORS middleware
{% if cors_enabled %}
app.add_middleware(
    CORSMiddleware,
    allow_origins={{ cors_origins | to_json }},
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
{% endif %}

# Add trusted host middleware (security)
app.add_middleware(
    TrustedHostMiddleware,
    allowed_hosts=[
        "192.168.10.8",
        "hx-orchestrator-server.dev-test.hana-x.ai",
        "localhost",
        "127.0.0.1"
    ]
)

# Include routers
app.include_router(health.router, tags=["health"])

# TODO: Add additional routers in subsequent deployments
# app.include_router(ingestion.router, prefix="/lightrag", tags=["ingestion"])
# app.include_router(query.router, prefix="/lightrag", tags=["query"])
# app.include_router(jobs.router, prefix="/jobs", tags=["jobs"])
# app.include_router(events.router, prefix="/events", tags=["events"])

@app.get("/")
async def root():
    """Root endpoint - API information"""
    return {
        "service": "Shield Orchestrator",
        "version": "{{ api_version }}",
        "status": "operational",
        "docs": "{{ api_docs_url }}",
        "health": "{{ health_check_path }}"
    }

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(
        "main:app",
        host="{{ orchestrator_host }}",
        port={{ orchestrator_port }},
        workers={{ orchestrator_workers }},
        loop="uvloop",
        log_config="{{ log_config_file }}",
        reload={{ orchestrator_reload | lower }}
    )
```

---

## templates/config/settings.py.j2

```python
"""
Configuration management using Pydantic Settings
"""

from pydantic_settings import BaseSettings, SettingsConfigDict
from pydantic import Field, SecretStr
from typing import List


class Settings(BaseSettings):
    """
    Application settings loaded from environment variables.
    """
    
    model_config = SettingsConfigDict(
        env_file="/opt/hx-citadel-shield/orchestrator/config/.env",
        env_file_encoding="utf-8",
        case_sensitive=False
    )
    
    # Server configuration
    orchestrator_env: str = Field(default="production")
    orchestrator_host: str = Field(default="{{ orchestrator_host }}")
    orchestrator_port: int = Field(default={{ orchestrator_port }})
    orchestrator_workers: int = Field(default={{ orchestrator_workers }})
    log_level: str = Field(default="{{ log_level }}")
    log_format: str = Field(default="{{ log_format }}")
    
    # Database (PostgreSQL)
    postgres_host: str = Field(default="192.168.10.48")
    postgres_port: int = Field(default=5432)
    postgres_db: str = Field(default="shield_orchestrator")
    postgres_user: str = Field(default="orchestrator")
    postgres_password: SecretStr
    
    @property
    def database_url(self) -> str:
        return f"postgresql+asyncpg://{self.postgres_user}:{self.postgres_password.get_secret_value()}@{self.postgres_host}:{self.postgres_port}/{self.postgres_db}"
    
    # Redis
    redis_host: str = Field(default="192.168.10.48")
    redis_port: int = Field(default=6379)
    redis_db: int = Field(default=0)
    
    @property
    def redis_url(self) -> str:
        return f"redis://{self.redis_host}:{self.redis_port}/{self.redis_db}"
    
    # Qdrant
    qdrant_url: str = Field(default="https://192.168.10.9:6333")
    qdrant_api_key: SecretStr
    qdrant_collection: str = Field(default="hx_corpus_v1")
    qdrant_verify_ssl: bool = Field(default=False)
    
    # LLM (via LiteLLM)
    llm_api_base: str = Field(default="http://192.168.10.46:4000/v1")
    llm_api_key: SecretStr
    llm_model: str = Field(default="llama3.2:latest")
    llm_embedding_model: str = Field(default="mxbai-embed-large")
    
    # CORS
    cors_origins: List[str] = Field(default={{ cors_origins | to_json }})
    
    # Security
    jwt_secret_key: SecretStr
    jwt_algorithm: str = Field(default="HS256")
    jwt_access_token_expire_minutes: int = Field(default=60)


# Global settings instance
settings = Settings()
```

---

## templates/api/health.py.j2

```python
"""
Health check endpoints
"""

from fastapi import APIRouter, status
from pydantic import BaseModel
from datetime import datetime
import psutil
import time

router = APIRouter()

# Application start time (for uptime calculation)
START_TIME = time.time()


class HealthResponse(BaseModel):
    """Basic health response"""
    status: str
    timestamp: datetime
    version: str
    uptime_seconds: float


class ComponentHealth(BaseModel):
    """Individual component health"""
    status: str
    latency_ms: float = 0
    details: dict = {}


class DetailedHealthResponse(BaseModel):
    """Detailed health with all dependencies"""
    status: str
    timestamp: datetime
    components: dict
    overall_status: str


@router.get(
    "{{ health_check_path }}",
    response_model=HealthResponse,
    status_code=status.HTTP_200_OK,
    tags=["health"]
)
async def health_check():
    """
    Basic health check (liveness probe).
    
    Returns:
        200: Service is alive
        503: Service is unhealthy
    """
    return HealthResponse(
        status="healthy",
        timestamp=datetime.utcnow(),
        version="{{ api_version }}",
        uptime_seconds=time.time() - START_TIME
    )


@router.get(
    "{{ health_detailed_path }}",
    response_model=DetailedHealthResponse,
    tags=["health"]
)
async def health_detailed():
    """
    Detailed health check with dependency status.
    
    Checks:
      - PostgreSQL connection
      - Redis connection
      - Qdrant availability
      - Ollama LLM
      - LightRAG engine
      - Worker pool
    
    Returns:
        200: All systems operational
        207: Partial (some dependencies down)
        503: Critical systems down
    """
    components = {}
    
    # TODO: Add dependency checks in subsequent deployments
    # components["postgresql"] = await check_postgresql()
    # components["redis"] = await check_redis()
    # components["qdrant"] = await check_qdrant()
    # components["ollama"] = await check_ollama()
    # components["lightrag"] = await check_lightrag()
    # components["worker_pool"] = await check_worker_pool()
    
    # For now, return basic status
    components["application"] = {
        "status": "up",
        "memory_mb": psutil.Process().memory_info().rss / 1024 / 1024,
        "cpu_percent": psutil.Process().cpu_percent(interval=0.1)
    }
    
    overall_status = "healthy"
    
    return DetailedHealthResponse(
        status="healthy",
        timestamp=datetime.utcnow(),
        components=components,
        overall_status=overall_status
    )


@router.get(
    "{{ health_readiness_path }}",
    status_code=status.HTTP_200_OK,
    tags=["health"]
)
async def health_readiness():
    """
    Readiness probe (is service ready to accept traffic?).
    
    Checks:
      - Database migrations applied
      - Redis connection established
      - Configuration loaded
      - Worker pool started
    
    Returns:
        200: Ready to accept traffic
        503: Still initializing
    """
    # TODO: Add readiness checks in subsequent deployments
    return {"ready": True, "timestamp": datetime.utcnow()}


@router.get(
    "{{ health_liveness_path }}",
    status_code=status.HTTP_200_OK,
    tags=["health"]
)
async def health_liveness():
    """
    Liveness probe (is process alive?).
    
    Used by systemd watchdog for auto-restart.
    
    Returns:
        200: Process is alive
        No response: Process dead (restart)
    """
    return {
        "alive": True,
        "pid": psutil.Process().pid,
        "timestamp": datetime.utcnow()
    }
```

---

## templates/shield-orchestrator.service.j2

**(From approved deployment plan - Section 1.5)**

```ini
[Unit]
Description=Shield Orchestrator Server (Intelligence Hub)
Documentation=https://github.com/hanax-ai/hx-citadel-shield
After=network-online.target postgresql.service redis.service
Wants=network-online.target
Requires=network-online.target

[Service]
Type=notify
User={{ orchestrator_service_user }}
Group={{ orchestrator_service_group }}
WorkingDirectory={{ orchestrator_app_dir }}

# Environment
Environment=PATH={{ orchestrator_venv_dir }}/bin:/usr/local/bin:/usr/bin
EnvironmentFile={{ orchestrator_app_dir }}/config/.env

# Execution
ExecStart={{ orchestrator_venv_dir }}/bin/uvicorn main:app \
    --host {{ orchestrator_host }} \
    --port {{ orchestrator_port }} \
    --workers {{ orchestrator_workers }} \
    --loop uvloop \
    --log-config {{ log_config_file }}

# Reload support
ExecReload=/bin/kill -HUP $MAINPID
KillMode=mixed
KillSignal=SIGTERM
TimeoutStopSec=30

# Restart policy
Restart=always
RestartSec=10s
StartLimitInterval=5min
StartLimitBurst=5

# Logging
StandardOutput=journal
StandardError=journal
SyslogIdentifier=shield-orchestrator

# Resource limits
LimitNOFILE=65536
LimitNPROC=4096
MemoryMax=16G
CPUQuota=800%

# Security hardening
NoNewPrivileges=yes
PrivateTmp=yes
ProtectSystem=strict
ProtectHome=yes
ReadWritePaths={{ orchestrator_data_dir }} {{ orchestrator_log_dir }} {{ orchestrator_app_dir }}/logs
ReadOnlyPaths={{ orchestrator_app_dir }}

# Watchdog (health check for auto-restart)
WatchdogSec=60
NotifyAccess=main

[Install]
WantedBy=multi-user.target
```

---

## templates/config/.env.j2

```bash
# Shield Orchestrator Environment Configuration
# Generated by Ansible for {{ ansible_hostname }}

# Server Configuration
ORCHESTRATOR_ENV=production
ORCHESTRATOR_HOST={{ orchestrator_host }}
ORCHESTRATOR_PORT={{ orchestrator_port }}
ORCHESTRATOR_WORKERS={{ orchestrator_workers }}
LOG_LEVEL={{ log_level }}
LOG_FORMAT={{ log_format }}

# Database (PostgreSQL)
POSTGRES_HOST=192.168.10.48
POSTGRES_PORT=5432
POSTGRES_DB=shield_orchestrator
POSTGRES_USER=orchestrator
POSTGRES_PASSWORD={{ vault_postgres_orchestrator_password }}
DATABASE_URL=postgresql+asyncpg://orchestrator:{{ vault_postgres_orchestrator_password }}@192.168.10.48:5432/shield_orchestrator

# Redis
REDIS_HOST=192.168.10.48
REDIS_PORT=6379
REDIS_DB=0
REDIS_URL=redis://192.168.10.48:6379/0

# Qdrant
QDRANT_URL=https://192.168.10.9:6333
QDRANT_API_KEY={{ vault_qdrant_api_key }}
QDRANT_COLLECTION=hx_corpus_v1
QDRANT_VERIFY_SSL=false

# LLM (via LiteLLM)
LLM_API_BASE=http://192.168.10.46:4000/v1
LLM_API_KEY={{ vault_litellm_api_key }}
LLM_MODEL=llama3.2:latest
LLM_EMBEDDING_MODEL=mxbai-embed-large

# Security
JWT_SECRET_KEY={{ vault_jwt_secret_key }}
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60

# Monitoring
PROMETHEUS_ENABLED=true
OPENTELEMETRY_ENABLED=true
OPENTELEMETRY_ENDPOINT=http://192.168.10.16:4317
```

---

## tasks/01-dependencies.yml

```yaml
---
# FastAPI and dependencies installation
- name: Copy FastAPI requirements file
  ansible.builtin.copy:
    src: requirements-fastapi.txt
    dest: "{{ orchestrator_app_dir }}/requirements-fastapi.txt"
    owner: "{{ orchestrator_service_user }}"
    group: "{{ orchestrator_service_group }}"
    mode: "0644"
  become: yes

- name: Install FastAPI and dependencies
  ansible.builtin.pip:
    requirements: "{{ orchestrator_app_dir }}/requirements-fastapi.txt"
    virtualenv: "{{ orchestrator_venv_dir }}"
  become: yes
  become_user: "{{ orchestrator_service_user }}"
  tags: [dependencies]

- name: Verify FastAPI installation
  ansible.builtin.command: "{{ orchestrator_venv_dir }}/bin/python -c 'import fastapi; print(fastapi.__version__)'"
  register: fastapi_version_check
  changed_when: false
  tags: [dependencies, validation]

- name: Display FastAPI version
  ansible.builtin.debug:
    msg: "FastAPI version: {{ fastapi_version_check.stdout }}"
  tags: [dependencies]
```

---

## tasks/02-application-structure.yml

```yaml
---
# Application structure deployment
- name: Deploy main application file
  ansible.builtin.template:
    src: main.py.j2
    dest: "{{ orchestrator_app_dir }}/main.py"
    owner: "{{ orchestrator_service_user }}"
    group: "{{ orchestrator_service_group }}"
    mode: "0755"
  become: yes
  notify: restart orchestrator
  tags: [application]

- name: Deploy configuration settings
  ansible.builtin.template:
    src: config/settings.py.j2
    dest: "{{ orchestrator_app_dir }}/config/settings.py"
    owner: "{{ orchestrator_service_user }}"
    group: "{{ orchestrator_service_group }}"
    mode: "0644"
  become: yes
  notify: restart orchestrator
  tags: [application]

- name: Create __init__.py files
  ansible.builtin.copy:
    content: '"""{{ item.split("/")[-1] | title }} module"""'
    dest: "{{ orchestrator_app_dir }}/{{ item }}/__init__.py"
    owner: "{{ orchestrator_service_user }}"
    group: "{{ orchestrator_service_group }}"
    mode: "0644"
  loop:
    - config
    - models
    - services
    - agents
    - workflows
    - workers
    - api
    - database
    - utils
  become: yes
  tags: [application]

- name: Deploy health check API
  ansible.builtin.template:
    src: api/health.py.j2
    dest: "{{ orchestrator_app_dir }}/api/health.py"
    owner: "{{ orchestrator_service_user }}"
    group: "{{ orchestrator_service_group }}"
    mode: "0644"
  become: yes
  notify: restart orchestrator
  tags: [application]
```

---

## tasks/03-configuration.yml

```yaml
---
# Configuration deployment
- name: Deploy environment configuration
  ansible.builtin.template:
    src: config/.env.j2
    dest: "{{ orchestrator_app_dir }}/config/.env"
    owner: "{{ orchestrator_service_user }}"
    group: "{{ orchestrator_service_group }}"
    mode: "0600"  # Sensitive file
  become: yes
  notify: restart orchestrator
  tags: [configuration]

- name: Deploy logging configuration
  ansible.builtin.template:
    src: logging.yaml.j2
    dest: "{{ orchestrator_app_dir }}/config/logging.yaml"
    owner: "{{ orchestrator_service_user }}"
    group: "{{ orchestrator_service_group }}"
    mode: "0644"
  become: yes
  notify: restart orchestrator
  tags: [configuration]

- name: Deploy logging utilities
  ansible.builtin.template:
    src: utils/logging_config.py.j2
    dest: "{{ orchestrator_app_dir }}/utils/logging_config.py"
    owner: "{{ orchestrator_service_user }}"
    group: "{{ orchestrator_service_group }}"
    mode: "0644"
  become: yes
  notify: restart orchestrator
  tags: [configuration]
```

---

## tasks/04-service.yml

```yaml
---
# Systemd service deployment
- name: Deploy systemd service file
  ansible.builtin.template:
    src: shield-orchestrator.service.j2
    dest: /etc/systemd/system/shield-orchestrator.service
    owner: root
    group: root
    mode: "0644"
  become: yes
  notify:
    - reload systemd
    - restart orchestrator
  tags: [service]

- name: Enable orchestrator service
  ansible.builtin.systemd:
    name: shield-orchestrator
    enabled: yes
    daemon_reload: yes
  become: yes
  tags: [service]

- name: Start orchestrator service
  ansible.builtin.systemd:
    name: shield-orchestrator
    state: started
  become: yes
  tags: [service]
```

---

## tasks/05-health-checks.yml

```yaml
---
# Health check validation
- name: Wait for orchestrator to start
  ansible.builtin.wait_for:
    host: "{{ orchestrator_host }}"
    port: "{{ orchestrator_port }}"
    delay: 5
    timeout: 60
    state: started
  tags: [health, validation]

- name: Check basic health endpoint
  ansible.builtin.uri:
    url: "http://localhost:{{ orchestrator_port }}{{ health_check_path }}"
    method: GET
    status_code: 200
  register: health_check
  retries: 5
  delay: 3
  until: health_check.status == 200
  tags: [health, validation]

- name: Check detailed health endpoint
  ansible.builtin.uri:
    url: "http://localhost:{{ orchestrator_port }}{{ health_detailed_path }}"
    method: GET
    status_code: 200
  register: health_detailed_check
  tags: [health, validation]

- name: Check readiness endpoint
  ansible.builtin.uri:
    url: "http://localhost:{{ orchestrator_port }}{{ health_readiness_path }}"
    method: GET
    status_code: 200
  register: readiness_check
  tags: [health, validation]

- name: Check liveness endpoint
  ansible.builtin.uri:
    url: "http://localhost:{{ orchestrator_port }}{{ health_liveness_path }}"
    method: GET
    status_code: 200
  register: liveness_check
  tags: [health, validation]

- name: Display health check results
  ansible.builtin.debug:
    msg:
      - "✅ Health: {{ health_check.json.status }}"
      - "✅ Readiness: {{ readiness_check.json.ready }}"
      - "✅ Liveness: {{ liveness_check.json.alive }}"
      - "✅ Orchestrator is operational on port {{ orchestrator_port }}!"
  tags: [health, validation]
```

---

## handlers/main.yml

```yaml
---
# Handlers for service management
- name: reload systemd
  ansible.builtin.systemd:
    daemon_reload: yes
  become: yes

- name: restart orchestrator
  ansible.builtin.systemd:
    name: shield-orchestrator
    state: restarted
  become: yes
```

---

## Validation Script

**File:** `scripts/validate-orchestrator-fastapi.sh`

```bash
#!/bin/bash
# Validate Orchestrator FastAPI Deployment

set -e

ORCHESTRATOR_HOST="192.168.10.8"
ORCHESTRATOR_PORT="8000"

echo "=== Shield Orchestrator FastAPI Validation ==="

# Test 1: Service status
echo "Test 1: Checking service status..."
ssh agent0@${ORCHESTRATOR_HOST} "sudo systemctl status shield-orchestrator --no-pager"

# Test 2: Port listening
echo "Test 2: Checking port ${ORCHESTRATOR_PORT}..."
nc -zv ${ORCHESTRATOR_HOST} ${ORCHESTRATOR_PORT}

# Test 3: Health endpoint
echo "Test 3: Health check..."
curl -s http://${ORCHESTRATOR_HOST}:${ORCHESTRATOR_PORT}/health | jq .

# Test 4: Detailed health
echo "Test 4: Detailed health check..."
curl -s http://${ORCHESTRATOR_HOST}:${ORCHESTRATOR_PORT}/health/detailed | jq .

# Test 5: Readiness
echo "Test 5: Readiness check..."
curl -s http://${ORCHESTRATOR_HOST}:${ORCHESTRATOR_PORT}/health/readiness | jq .

# Test 6: Liveness
echo "Test 6: Liveness check..."
curl -s http://${ORCHESTRATOR_HOST}:${ORCHESTRATOR_PORT}/health/liveness | jq .

# Test 7: API docs
echo "Test 7: API documentation..."
curl -s http://${ORCHESTRATOR_HOST}:${ORCHESTRATOR_PORT}/docs | head -20

# Test 8: Root endpoint
echo "Test 8: Root endpoint..."
curl -s http://${ORCHESTRATOR_HOST}:${ORCHESTRATOR_PORT}/ | jq .

echo "=== Validation Complete ==="
```

---

## Success Criteria

```yaml
✅ Dependencies:
   • FastAPI >=0.115.0 installed
   • Uvicorn >=0.30.0 installed
   • Pydantic >=2.0.0 installed
   • All requirements installed (15+ packages)

✅ Application:
   • main.py deployed
   • config/settings.py deployed
   • api/health.py deployed
   • All __init__.py files created

✅ Configuration:
   • .env file deployed (0600 permissions)
   • logging.yaml deployed
   • Settings loading from environment

✅ Service:
   • Systemd service file deployed
   • Service enabled for auto-start
   • Service running (active)
   • No errors in journalctl

✅ Health Checks:
   • GET /health returns 200
   • GET /health/detailed returns 200
   • GET /health/readiness returns 200
   • GET /health/liveness returns 200

✅ API Documentation:
   • Swagger UI accessible at /docs
   • ReDoc accessible at /redoc
   • OpenAPI schema at /openapi.json
```

---

## Timeline

**Estimated Time:** 4-6 hours

```yaml
Task Breakdown:
  • Dependencies installation: 1 hour
  • Application structure: 1.5 hours
  • Configuration deployment: 1 hour
  • Service setup: 30 minutes
  • Health check validation: 30 minutes
  • Testing and verification: 1 hour
  • Buffer: 30 minutes

Total: 5.5 hours
```

---

## Next Component

**After FastAPI framework is deployed, proceed to:**

→ **Component 3: PostgreSQL Integration** (`03-postgresql-integration-plan.md`)

---

**FastAPI Framework Plan Complete!** ✅
**Ready for Ansible deployment!** 🚀

